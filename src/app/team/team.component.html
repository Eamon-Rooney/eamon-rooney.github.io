<section>
<h2>Players: {{ teamName }}</h2>

<button ngDefaultControl [(ngModel)]="toogleCompareMode" class="button button-primary" (click)="toggleCompareMode()"> {{ toogleCompareMode}} compare to rivals</button>

<ng-container *ngIf="toogleCompareMode === 'Show'">
<Label>Switch Gameweek: </Label>
<select [(ngModel)]="eventID" (ngModelChange)="updateGameweek()">
  <option *ngFor="let event of events; let i = index" [ngValue]="event.id"> {{ event.id }} </option>
</select>
<Label> Current Gameweek: {{ gameweekID}}</Label>


<h6>Starting 11</h6>
<div class="players">
  <ng-container *ngFor="let player of players; let i = index">
    <ng-container *ngFor="let pick of team?.picks; let i = index">
    <app-card class="player" *ngIf="pick?.element == player?.id &&
      player?.element_type === 1 &&
      pick.position <= 11">
      <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
      <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
      <!-- <p class="position"> {{ positions[player?.element_type - 1].singular_name_short }}</p> -->
      <img class="jersey" src="../../assets/shirts/{{player.team}}keep.webp" alt="{{player.webname}} jersey">
      <p class="name"> {{ player.web_name }}</p>
      <p class="points" *ngIf="pick.multiplier == 1">{{player.event_points * 1 }}</p>
      <p class="points" *ngIf="pick.multiplier == 2">{{player.event_points * 2 }}</p>
      <p class="points" *ngIf="pick.multiplier == 3">{{player.event_points * 3 }}</p>
      <ng-container *ngFor="let transfer of transfers">
      <ng-container *ngIf="transfer?.element_in === pick?.element">
        <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
      </ng-container>
      </ng-container>
    </app-card>
  </ng-container>
  </ng-container>
  </div>
  <div class="players">
  <ng-container *ngFor="let player of players; let i = index">
    <ng-container *ngFor="let pick of team?.picks; let i = index">
    <app-card class="player" *ngIf="pick?.element == player?.id &&
      player?.element_type === 2 &&
      pick.position <= 11">
      <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
      <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
      <img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
      <p class="name"> {{ player.web_name }}</p>
      <p class="points" *ngIf="pick.multiplier == 1">{{player.event_points * 1 }}</p>
      <p class="points" *ngIf="pick.multiplier == 2">{{player.event_points * 2 }}</p>
      <p class="points" *ngIf="pick.multiplier == 3">{{player.event_points * 3 }}</p>
      <ng-container *ngFor="let transfer of transfers">
        <ng-container *ngIf="transfer?.element_in === pick?.element">
          <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
      </ng-container>
      </ng-container>
    </app-card>
  </ng-container>
  </ng-container>
  </div>
  <div class="players">
  <ng-container *ngFor="let player of players; let i = index">
    <ng-container *ngFor="let pick of team?.picks; let i = index">
    <app-card class="player" *ngIf="pick?.element == player?.id &&
      player?.element_type === 3 &&
      pick.position <= 11">
      <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
      <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
      <img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
      <p class="name"> {{ player.web_name }}</p>
      <p class="points" *ngIf="pick.multiplier == 1">{{player.event_points * 1 }}</p>
      <p class="points" *ngIf="pick.multiplier == 2">{{player.event_points * 2 }}</p>
      <p class="points" *ngIf="pick.multiplier == 3">{{player.event_points * 3 }}</p>
      <ng-container *ngFor="let transfer of transfers">
        <ng-container *ngIf="transfer?.element_in === pick?.element">
        <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>      </ng-container>
      </ng-container>
    </app-card>
  </ng-container>
  </ng-container>
</div>
<div class="players">
<ng-container *ngFor="let player of players; let i = index">
  <ng-container *ngFor="let pick of team?.picks; let i = index">
  <app-card class="player" *ngIf="pick?.element == player?.id &&
    player?.element_type === 4 &&
    pick.position <= 11">
    <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
    <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
    <img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
    <p class="name"> {{ player.web_name }}</p>
    <p class="points" *ngIf="pick.multiplier == 1">{{player.event_points * 1 }}</p>
    <p class="points" *ngIf="pick.multiplier == 2">{{player.event_points * 2 }}</p>
    <p class="points" *ngIf="pick.multiplier == 3">{{player.event_points * 3 }}</p>
    <ng-container *ngFor="let transfer of transfers">
      <ng-container *ngIf="transfer?.element_in === pick?.element">
        <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
    </ng-container>
    </ng-container>
  </app-card>
</ng-container>
</ng-container>
</div>
<h6>Subs</h6>
<div class="subs">
<ng-container *ngFor="let player of players; let i = index">
  <ng-container *ngFor="let pick of team?.picks; let i = index">
  <app-card class="player" *ngIf="pick?.element == player?.id &&
    pick.position == 12">
    <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
    <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
    <img class="jersey" src="../../assets/shirts/{{player.team}}keep.webp" alt="{{player.webname}} jersey">
    <p class="name"> {{ player.web_name }}</p>
    <p class="points"> {{ player.event_points }}</p>
    <ng-container *ngFor="let transfer of transfers">
      <ng-container *ngIf="transfer?.element_in === pick?.element">
        <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
    </ng-container>
    </ng-container>
  </app-card>
</ng-container>
</ng-container>
    <ng-container *ngFor="let player of players; let i = index">
      <ng-container *ngFor="let pick of team?.picks; let i = index">
  <app-card class="player" *ngIf="pick?.element == player?.id &&
  pick.position == 13">
  <p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
  <p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
  <img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
  <p class="name"> {{ player.web_name }}</p>
  <p class="points"> {{ player.event_points }}</p>
  <ng-container *ngFor="let transfer of transfers">
  <ng-container *ngIf="transfer?.element_in === pick?.element">
    <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
  </ng-container>
  </ng-container>
</app-card>
</ng-container>
</ng-container>
  <ng-container *ngFor="let player of players; let i = index">
    <ng-container *ngFor="let pick of team?.picks; let i = index">
<app-card class="player" *ngIf="pick?.element == player?.id &&
pick.position == 14">
<p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
<p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
<img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
<p class="name"> {{ player.web_name }}</p>
<p class="points"> {{ player.event_points }}</p>
<ng-container *ngFor="let transfer of transfers">
<ng-container *ngIf="transfer?.element_in === pick?.element">
  <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
</ng-container>
</ng-container>
</app-card>
</ng-container>
</ng-container>
  <ng-container *ngFor="let player of players; let i = index">
    <ng-container *ngFor="let pick of team?.picks; let i = index">
<app-card class="player" *ngIf="pick?.element == player?.id &&
pick.position == 15">
<p class="captains"> {{ pick.is_captain ? "C" : '' }}</p>
<p class="captains"> {{ pick.is_vice_captain ? "V" : '' }}</p>
<img class="jersey" src="../../assets/shirts/{{player.team}}out.webp" alt="{{player.webname}} jersey">
<p class="name"> {{ player.web_name }}</p>
<p class="points"> {{ player.event_points }}</p>
<ng-container *ngFor="let transfer of transfers">
<ng-container *ngIf="transfer?.element_in === pick?.element">
    <p class="name">GW{{ transfer.event }}|{{ transfer.element_in_cost / 10 | number : '1.1-1' }}</p>
</ng-container>
</ng-container>
</app-card>
  </ng-container>
</ng-container>
</div>
</ng-container>
</section>

<section>
  <ng-container *ngIf="toogleCompareMode === 'Show'">
  <button ngDefaultControl [(ngModel)]="toogleTransfers" class="button button-primary" (click)="toggleGWTransfers()"> {{ toogleTransfers }} game week transfers</button>

  <ng-container *ngIf="toogleTransfers === 'Hide'">

    <h2>Transfers game week: {{ eventID }} </h2>
    <div style="display:inline-block; width: 50%;">
      <ng-container *ngFor="let transfer of transfers">
        <ng-container *ngFor="let player of players;">
          <ng-container *ngIf="transfer.event === eventID && transfer.element_in === player?.id">
              <app-card style="color: green;">{{ player.web_name }} </app-card>
          </ng-container>
        </ng-container>
      </ng-container>
      </div>
      <div style="display:inline-block; width: 50%;">
      <ng-container *ngFor="let transfer of transfers">
        <ng-container *ngFor="let player of players;">
          <ng-container *ngIf="transfer.event === eventID && transfer.element_out === player?.id">
              <app-card style="color: red;">{{ player.web_name }} </app-card>
          </ng-container>
        </ng-container>
      </ng-container>
    </div>
  </ng-container>
</ng-container>
</section>


<ng-container *ngIf="toogleCompareMode === 'Hide'">
  <app-compare></app-compare>
</ng-container>
